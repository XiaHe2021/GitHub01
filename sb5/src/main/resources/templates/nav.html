<!DOCTYPE html>
<html lang="zh_CN" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common::header('导航')}">
</head>
<body>
<div id="myAccordion" class="easyui-accordion" data-options="fit:true" style="width:500px;height:300px;"></div>
<script type="text/javascript">
    //请求数据
    $.ajax({
        url:"menu/",
        type:"get",
        dataType:"json",
        success:function (data) {
            console.log(data);
            //遍历data
            $(data).each(function (index,menu) {
                console.log(menu);

                    $('#myAccordion').accordion('add', {
                        id: "menu" + menu.id,
                        title: menu.text
                    });
                    //动态创建一个HTML标签
                    $("#menu" + menu.id).html("<ul id='myTree" + menu.id + "'></ul>");
                    //动态创建Tree
                    $("#myTree" + menu.id).tree({
                        data: menu.children,

                        onClick: function (node) {

                             // if (node.Attributes == null || node.Attributes.url == null) {
                             //     return;
                             // }

                            //判断tabs是否已/存在
                            if ($("#myTabs").tabs('exists', node.text)) {
                                //存在
                                $("#myTabs").tabs('select', node.text)
                            } else {
                                //创建tabs
                                $("#myTabs").tabs('add', {
                                    title: node.text,
                                    width: 250,
                                    closable: true,
                                    href: node.attributes.url,
                                    /*title: node.text,

                                    closable: true,*/
                                })
                            }

                        }
                    })

            })
        },
        error:function () {
            console.log("请求出错！");
        }
    })
</script>
</body>
</html>